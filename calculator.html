<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Гидро-Физика — Калькулятор</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header>
    <h1>Гидро-Физика — Калькулятор волн</h1>
    <p>Вычисляй Энергии, Штормовые индексы и Волновую устойчивость!</p>

    <!-- Гамбургер меню -->
    <div class="hamburger" onclick="toggleMenu()">
        <div></div>
        <div></div>
        <div></div>
    </div>

    <nav id="navMenu">
        <a href="index.html">Главная</a>
        <a href="calculator.html">Калькулятор</a>
        <a href="graphs.html">Графики</a>
    </nav>
</header>

<main>
    <section class="section">
        <h2>Ввод параметров волны</h2>
        <div class="input-row">
            <label>ГЕ: <input id="GE" type="number" value="2"></label>
            <label>HM: <input id="HM" type="number" value="3"></label>
            <label>T: <input id="T" type="number" value="4"></label>
            <label>AP: <input id="AP" type="number" value="5"></label>
            <label>WR: <input id="WR" type="number" value="1.5"></label>
            <label>D: <input id="D" type="number" value="12"></label>
            <label>ρ: <input id="rho" type="number" value="1025"></label>
        </div>
        <button onclick="calculateWave()">Рассчитать</button>
        <div id="result"></div>
    </section>

    <section class="section">
        <h2>График ЭЕ vs ГЕ</h2>
        <canvas id="chart" width="600" height="300"></canvas>
    </section>
</main>

<footer style="text-align:center; padding:10px; background:#004d4d; color:#fff;">
    &copy; 2025 Гидро-Физика. Все права защищены.
</footer>

<script>
// --- Меню ---
function toggleMenu() {
    document.getElementById('navMenu').classList.toggle('show');
}

// --- Расчеты ---
function calculateWave() {
    let GE = parseFloat(document.getElementById('GE').value);
    let HM = parseFloat(document.getElementById('HM').value);
    let T = parseFloat(document.getElementById('T').value);
    let AP = parseFloat(document.getElementById('AP').value);
    let WR = parseFloat(document.getElementById('WR').value);
    let D = parseFloat(document.getElementById('D').value);
    let rho = parseFloat(document.getElementById('rho').value);

    let EE = GE * HM * T * Math.exp(AP/10);
    let HS = T/HM + GE*WR;
    let GK = HM / (T + HS);
    let SVU = (D * rho) / (EE * WR * Math.log(AP+1));
    let energyWarning = EE > GK * 15 ? "⚠️ Энергокатастрофа!" : "✅ Волна безопасна";

    document.getElementById('result').innerHTML = `
        Энергия волны (ЭЕ): ${EE.toFixed(2)} <br>
        Штормовой индекс (HS): ${HS.toFixed(2)} <br>
        Волновой коэффициент (GK): ${GK.toFixed(3)} <br>
        Сверх-Волновая Устойчивость (SVU): ${SVU.toFixed(2)} <br>
        Предупреждение: ${energyWarning}
    `;

    updateChart(GE, EE);
}

// --- График ---
let ctx = document.getElementById('chart').getContext('2d');
let chart = new Chart(ctx, {
    type: 'line',
    data: { labels: [], datasets: [{ label: 'ЭЕ', data: [], borderColor: '#006064', fill:false }] },
    options: {
        scales: {
            x: { title: { display:true, text:'ГЕ' } },
            y: { title: { display:true, text:'ЭЕ' } }
        }
    }
});

function updateChart(GE, EE) {
    chart.data.labels.push(GE);
    chart.data.datasets[0].data.push(EE);
    chart.update();
}
</script>

</body>
</html>