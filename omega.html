<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <title>omega | v.1.0.0</title>
    <style>
        /* =========================================
           CORE ARCHITECTURE & DESIGN SYSTEM
           Code Name: STREET OBSIDIAN
           ========================================= */
        :root {
            --c-void: #000000;
            --c-concrete: #111111;
            --c-armor: #1a1a1a;
            --c-steel: #333333;
            --c-text-primary: #e0e0e0;
            --c-text-muted: #666666;
            --c-accent: #ffffff;
            --c-danger: #800000;
            
            --f-mono: 'Courier New', monospace;
            --f-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            
            --s-dock-height: 70px;
            --s-radius: 4px;
            --z-back: -1;
            --z-workspace: 10;
            --z-dock: 100;
            --z-overlay: 200;
            --z-toast: 999;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--c-void);
            color: var(--c-text-primary);
            font-family: var(--f-sans);
            overflow: hidden; /* App-like feel */
        }

        /* --- BACKGROUND FX --- */
        #static-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: var(--z-back); opacity: 0.08; pointer-events: none;
        }

        /* --- LAYOUT STRUCTURE --- */
        #monolith-root {
            display: flex; flex-direction: column; height: 100vh;
            position: relative;
        }

        #workspace {
            flex: 1; position: relative; overflow: hidden;
            background: var(--c-void);
        }

        /* --- IFRAME CONTAINER (VIRTUAL PROCESS) --- */
        .process-view {
            width: 100%; height: 100%; border: none;
            position: absolute; top: 0; left: 0;
            background: #fff; /* Browser content needs white usually */
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .process-view.hidden { transform: scale(0.95); opacity: 0; pointer-events: none; z-index: -1; }
        .process-view.active { transform: scale(1); opacity: 1; z-index: 10; }

        /* --- INTERNAL APP CONTAINER --- */
        .internal-app {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--c-void); color: var(--c-text-primary);
            padding: 20px; z-index: 20; display: none;
            overflow-y: auto;
        }
        .internal-app.active { display: block; }

        /* --- OMEGA DOCK --- */
        #omega-bar {
            height: var(--s-dock-height);
            background: var(--c-concrete);
            border-top: 1px solid var(--c-steel);
            display: grid;
            grid-template-columns: 50px 1fr 50px 50px;
            gap: 10px;
            padding: 10px;
            z-index: var(--z-dock);
            box-shadow: 0 -10px 30px rgba(0,0,0,0.8);
        }

        .dock-btn {
            background: var(--c-armor); border: 1px solid var(--c-steel);
            color: var(--c-text-primary); border-radius: var(--s-radius);
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; cursor: pointer; transition: all 0.2s;
        }
        .dock-btn:active { background: var(--c-text-primary); color: var(--c-void); }

        .omnibox-wrapper { position: relative; display: flex; align-items: center; }
        #omnibox-input {
            width: 100%; height: 100%;
            background: var(--c-void); border: 1px solid var(--c-steel);
            color: var(--c-text-primary); font-family: var(--f-mono);
            padding: 0 15px; font-size: 14px; border-radius: var(--s-radius);
        }
        #omnibox-input:focus { border-color: var(--c-text-muted); }

        .tab-counter { 
            position: absolute; top: -5px; right: -5px; 
            background: var(--c-text-primary); color: var(--c-void); 
            font-size: 10px; padding: 2px 5px; border-radius: 2px; font-weight: bold;
        }

        /* --- OVERLAYS (Launcher / Tabs) --- */
        .overlay {
            position: fixed; bottom: var(--s-dock-height); left: 0; width: 100%;
            height: calc(100vh - var(--s-dock-height));
            background: rgba(10,10,10, 0.95);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            z-index: var(--z-overlay);
            transform: translateY(110%); transition: transform 0.3s ease;
            display: flex; flex-direction: column;
            border-top: 1px solid var(--c-steel);
        }
        .overlay.open { transform: translateY(0); }
        
        .overlay-header {
            padding: 20px; border-bottom: 1px solid var(--c-steel);
            display: flex; justify-content: space-between; align-items: center;
        }
        .overlay-title { font-family: var(--f-mono); font-size: 18px; text-transform: uppercase; letter-spacing: 2px;}

        /* --- TAB MANAGER UI --- */
        .tab-grid {
            padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
            overflow-y: auto;
        }
        .tab-card {
            background: var(--c-concrete); border: 1px solid var(--c-steel);
            height: 150px; border-radius: var(--s-radius); position: relative;
            display: flex; flex-direction: column; padding: 10px;
        }
        .tab-card.active { border-color: var(--c-text-primary); }
        .tab-card-preview { flex: 1; background: #000; opacity: 0.5; margin-bottom: 10px; }
        .tab-card-title { font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .tab-close { position: absolute; top: 5px; right: 5px; color: var(--c-danger); }

        /* --- LAUNCHER UI --- */
        .app-grid {
            padding: 30px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
        }
        .app-icon {
            aspect-ratio: 1; background: var(--c-armor); border: 1px solid var(--c-steel);
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 24px; cursor: pointer;
        }
        .app-label { text-align: center; font-size: 11px; margin-top: 5px; color: var(--c-text-muted); }

        /* --- INTERNAL APPS --- */
        /* Terminal */
        .terminal-screen { font-family: var(--f-mono); height: 100%; display: flex; flex-direction: column; }
        .terminal-output { flex: 1; overflow-y: auto; white-space: pre-wrap; color: #ccc; font-size: 13px; line-height: 1.4; padding-bottom: 10px;}
        .terminal-input-line { display: flex; border-top: 1px solid #333; padding-top: 10px; }
        .terminal-prompt { color: #666; margin-right: 10px; }
        .cmd-input { background: transparent; border: none; color: #fff; flex: 1; font-family: var(--f-mono); }

        /* Snake */
        #snake-canvas { background: var(--c-concrete); border: 1px solid var(--c-steel); display: block; margin: 0 auto; }
        .snake-controls { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; max-width: 200px; margin: 20px auto; }
        .dpad-btn { height: 50px; background: var(--c-armor); border: 1px solid var(--c-steel); color: #fff; }

        /* --- TOAST --- */
        #toast-container {
            position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%);
            z-index: var(--z-toast); display: flex; flex-direction: column; gap: 10px; pointer-events: none;
        }
        .toast {
            background: var(--c-concrete); border: 1px solid var(--c-text-muted);
            color: var(--c-text-primary); padding: 10px 20px; border-radius: 20px;
            font-size: 12px; font-family: var(--f-mono); box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<div id="monolith-root">
    <canvas id="static-canvas"></canvas>

    <div id="workspace">
        <div id="app-terminal" class="internal-app">
            <div class="terminal-screen">
                <div class="terminal-output" id="term-out">omega [v1.0.0]<br>System mounted.<br>Type 'help' for commands.</div>
                <div class="terminal-input-line">
                    <span class="terminal-prompt">root@omega:~#</span>
                    <input type="text" class="cmd-input" id="term-in" autocomplete="off" autocorrect="off">
                </div>
            </div>
        </div>
        
        <div id="app-snake" class="internal-app">
            <h2 style="text-align:center; font-family:var(--f-mono); margin-bottom:20px;">SNAKE.EXE</h2>
            <canvas id="snake-canvas" width="300" height="300"></canvas>
            <div class="snake-controls">
                <div></div><button class="dpad-btn" id="s-up">▲</button><div></div>
                <button class="dpad-btn" id="s-left">◀</button><button class="dpad-btn" id="s-down">▼</button><button class="dpad-btn" id="s-right">▶</button>
            </div>
            <p style="text-align:center; color: #666; margin-top:20px;">Score: <span id="snake-score">0</span></p>
        </div>
    </div>

    <div id="omega-bar">
        <button class="dock-btn" id="btn-back">←</button>
        <div class="omnibox-wrapper">
            <input type="text" id="omnibox-input" placeholder="Enter URL or Command...">
        </div>
        <button class="dock-btn" id="btn-tabs">
            <span style="border: 2px solid #ccc; width: 14px; height: 14px; border-radius: 2px;"></span>
            <div class="tab-counter" id="tab-count-badge">1</div>
        </button>
        <button class="dock-btn" id="btn-launcher">
            <span style="font-size: 20px;">⋮⋮</span>
        </button>
    </div>
</div>

<div id="overlay-tabs" class="overlay">
    <div class="overlay-header">
        <span class="overlay-title">Processes</span>
        <button class="dock-btn" id="btn-new-tab" style="width: 40px; height: 30px;">+</button>
    </div>
    <div class="tab-grid" id="tab-list-container"></div>
</div>

<div id="overlay-launcher" class="overlay">
    <div class="overlay-header">
        <span class="overlay-title">Modules</span>
    </div>
    <div class="app-grid">
        <div onclick="Monolith.System.openInternal('terminal')">
            <div class="app-icon">_</div><div class="app-label">Terminal</div>
        </div>
        <div onclick="Monolith.System.openInternal('snake')">
            <div class="app-icon">S</div><div class="app-label">Snake</div>
        </div>
    </div>
</div>

<div id="toast-container"></div>

<script>
/**
 * MONOLITH OS - Core Architecture
 * Senior Frontend Architect Implementation
 * * Includes: State Store, Event Bus, Virtual Process Manager, 
 * Internal App Engines, and DOM Reconciler.
 */

// --- UTILS ---
const Utils = {
    uuid: () => '_' + Math.random().toString(36).substr(2, 9),
    now: () => new Date().toLocaleTimeString(),
    el: (id) => document.getElementById(id),
    create: (tag, cls) => {
        const e = document.createElement(tag);
        if(cls) e.className = cls;
        return e;
    }
};

// --- EVENT BUS (Pub/Sub) ---
class EventBus {
    constructor() { this.events = {}; }
    on(event, listener) {
        if (!this.events[event]) this.events[event] = [];
        this.events[event].push(listener);
    }
    emit(event, data) {
        if (this.events[event]) this.events[event].forEach(l => l(data));
    }
}
const sysBus = new EventBus();

// --- STATE MANAGEMENT (Store) ---
class Store {
    constructor() {
        this.state = {
            tabs: [],
            activeTabId: null,
            activeInternalApp: null, // 'terminal', 'snake' or null
            overlays: { tabs: false, launcher: false },
            omniboxVal: ''
        };
    }

    // Actions
    addTab(url = 'about:blank') {
        const newTab = {
            id: Utils.uuid(),
            url: url,
            title: 'New Process',
            timestamp: Date.now()
        };
        this.state.tabs.push(newTab);
        this.setActiveTab(newTab.id);
        sysBus.emit('tabs:updated', this.state.tabs);
    }

    closeTab(id) {
        if (this.state.tabs.length <= 1) return; // Prevent closing last
        this.state.tabs = this.state.tabs.filter(t => t.id !== id);
        if (this.state.activeTabId === id) {
            this.setActiveTab(this.state.tabs[this.state.tabs.length - 1].id);
        }
        sysBus.emit('tabs:updated', this.state.tabs);
    }

    setActiveTab(id) {
        this.state.activeTabId = id;
        this.state.activeInternalApp = null;
        this.updateUrlFromTab(id);
        sysBus.emit('view:changed');
    }

    setInternalApp(appName) {
        this.state.activeInternalApp = appName;
        this.closeOverlays();
        Utils.el('omnibox-input').value = `omega://${appName}`;
        sysBus.emit('view:changed');
    }

    toggleOverlay(name) {
        // Close others
        Object.keys(this.state.overlays).forEach(k => {
            if(k !== name) this.state.overlays[k] = false;
        });
        this.state.overlays[name] = !this.state.overlays[name];
        sysBus.emit('overlay:changed', this.state.overlays);
    }

    closeOverlays() {
        Object.keys(this.state.overlays).forEach(k => this.state.overlays[k] = false);
        sysBus.emit('overlay:changed', this.state.overlays);
    }

    updateUrlFromTab(id) {
        const tab = this.state.tabs.find(t => t.id === id);
        if (tab) Utils.el('omnibox-input').value = tab.url === 'about:blank' ? '' : tab.url;
    }

    updateTabMeta(id, data) {
        const t = this.state.tabs.find(x => x.id === id);
        if(t) {
            if(data.url) t.url = data.url;
            if(data.title) t.title = data.title;
            if(id === this.state.activeTabId) Utils.el('omnibox-input').value = t.url;
            sysBus.emit('tabs:updated', this.state.tabs);
        }
    }
}

const State = new Store();

// --- UI MANAGERS ---

class DOMManager {
    constructor() {
        this.workspace = Utils.el('workspace');
        this.tabContainer = Utils.el('tab-list-container');
        this.iframeMap = new Map(); // Keep DOM elements in memory
        
        // Bind Events
        sysBus.on('tabs:updated', (tabs) => {
            this.renderTabs(tabs);
            this.syncIframes(tabs);
            Utils.el('tab-count-badge').innerText = tabs.length;
        });

        sysBus.on('view:changed', () => this.updateView());
        sysBus.on('overlay:changed', (overlays) => this.updateOverlays(overlays));
    }

    syncIframes(tabs) {
        // Remove dead iframes
        const activeIds = new Set(tabs.map(t => t.id));
        this.iframeMap.forEach((iframe, id) => {
            if (!activeIds.has(id)) {
                iframe.remove();
                this.iframeMap.delete(id);
            }
        });

        // Create new iframes
        tabs.forEach(tab => {
            if (!this.iframeMap.has(tab.id)) {
                const iframe = Utils.create('iframe', 'process-view hidden');
                iframe.sandbox = "allow-scripts allow-forms allow-same-origin";
                iframe.src = tab.url === 'about:blank' ? '' : tab.url;
                
                // Mocking load event to update title
                iframe.onload = () => {
                    try { 
                        // Cross-origin restriction will block this usually, 
                        // but simulating internal logic
                        State.updateTabMeta(tab.id, { title: "External Site" }); 
                    } catch(e) {}
                };

                this.workspace.appendChild(iframe);
                this.iframeMap.set(tab.id, iframe);
            }
        });
    }

    updateView() {
        // Hide all apps
        document.querySelectorAll('.internal-app').forEach(el => el.classList.remove('active'));
        
        // Hide all iframes
        this.iframeMap.forEach(el => {
            el.classList.remove('active');
            el.classList.add('hidden');
        });

        if (State.state.activeInternalApp) {
            const appEl = Utils.el(`app-${State.state.activeInternalApp}`);
            if (appEl) {
                appEl.classList.add('active');
                if(State.state.activeInternalApp === 'snake') SnakeGame.start();
                if(State.state.activeInternalApp === 'terminal') Terminal.focus();
            }
        } else if (State.state.activeTabId) {
            const iframe = this.iframeMap.get(State.state.activeTabId);
            if (iframe) {
                iframe.classList.remove('hidden');
                iframe.classList.add('active');
            }
            SnakeGame.pause();
        }
    }

    updateOverlays(overlays) {
        Utils.el('overlay-tabs').classList.toggle('open', overlays.tabs);
        Utils.el('overlay-launcher').classList.toggle('open', overlays.launcher);
    }

    renderTabs(tabs) {
        this.tabContainer.innerHTML = '';
        tabs.forEach(tab => {
            const card = Utils.create('div', `tab-card ${tab.id === State.state.activeTabId ? 'active' : ''}`);
            
            const preview = Utils.create('div', 'tab-card-preview');
            const title = Utils.create('div', 'tab-card-title');
            title.innerText = tab.url || "Empty";
            
            const closeBtn = Utils.create('div', 'tab-close');
            closeBtn.innerHTML = '×';
            closeBtn.onclick = (e) => {
                e.stopPropagation();
                State.closeTab(tab.id);
            };

            card.onclick = () => {
                State.setActiveTab(tab.id);
                State.toggleOverlay('tabs');
            };

            card.appendChild(closeBtn);
            card.appendChild(preview);
            card.appendChild(title);
            this.tabContainer.appendChild(card);
        });
    }
}

// --- INTERNAL APPS ---

// 1. Terminal Module
const Terminal = {
    el: Utils.el('term-out'),
    input: Utils.el('term-in'),
    history: [],
    init() {
        this.input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                this.exec(this.input.value);
                this.input.value = '';
            }
        });
    },
    log(msg) {
        this.el.innerHTML += `<div>${msg}</div>`;
        this.el.scrollTop = this.el.scrollHeight;
    },
    focus() { setTimeout(() => this.input.focus(), 100); },
    exec(cmd) {
        this.log(`<span style="color:#666">root@omega:~#</span> ${cmd}`);
        const args = cmd.trim().split(' ');
        const c = args[0].toLowerCase();

        switch(c) {
            case 'help':
                this.log(`COMMANDS: help, clear, date, reboot, exit, open [url]`);
                break;
            case 'clear':
                this.el.innerHTML = '';
                break;
            case 'date':
                this.log(new Date().toString());
                break;
            case 'reboot':
                location.reload();
                break;
            case 'exit':
                State.setActiveTab(State.state.activeTabId);
                break;
            case 'open':
                if(args[1]) Monolith.System.navigate(args[1]);
                else this.log("Usage: open <url>");
                break;
            default:
                this.log(`Unknown command: ${c}`);
        }
    }
};

// 2. Snake Game Module (Complex Logic)
const SnakeGame = {
    canvas: Utils.el('snake-canvas'),
    ctx: Utils.el('snake-canvas').getContext('2d'),
    running: false,
    timer: null,
    grid: 15,
    snake: {x: 160, y: 160, dx: 15, dy: 0, cells: [], maxCells: 4},
    apple: {x: 320, y: 320},
    score: 0,
    
    start() {
        if(this.running) return;
        this.running = true;
        this.score = 0;
        this.snake = {x: 160, y: 160, dx: this.grid, dy: 0, cells: [], maxCells: 4};
        this.placeApple();
        this.loop();
        Utils.el('snake-score').innerText = 0;
    },
    pause() {
        this.running = false;
        cancelAnimationFrame(this.timer);
    },
    placeApple() {
        this.apple.x = Math.floor(Math.random() * 20) * this.grid;
        this.apple.y = Math.floor(Math.random() * 20) * this.grid;
    },
    loop() {
        if(!this.running) return;
        this.timer = requestAnimationFrame(() => this.loop());
        
        // Slow down loop
        if (++this.frameCount < 4) return; 
        this.frameCount = 0;

        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        // Move
        this.snake.x += this.snake.snakeDx || this.snake.dx;
        this.snake.y += this.snake.snakeDy || this.snake.dy;

        // Wrap
        if (this.snake.x < 0) this.snake.x = this.canvas.width - this.grid;
        else if (this.snake.x >= this.canvas.width) this.snake.x = 0;
        if (this.snake.y < 0) this.snake.y = this.canvas.height - this.grid;
        else if (this.snake.y >= this.canvas.height) this.snake.y = 0;

        // Keep track of cells
        this.snake.cells.unshift({x: this.snake.x, y: this.snake.y});
        if (this.snake.cells.length > this.snake.maxCells) this.snake.cells.pop();

        // Draw Apple
        this.ctx.fillStyle = 'red';
        this.ctx.fillRect(this.apple.x, this.apple.y, this.grid-1, this.grid-1);

        // Draw Snake
        this.ctx.fillStyle = '#fff';
        this.snake.cells.forEach((cell, index) => {
            this.ctx.fillRect(cell.x, cell.y, this.grid-1, this.grid-1);
            
            // Eat Apple
            if (cell.x === this.apple.x && cell.y === this.apple.y) {
                this.snake.maxCells++;
                this.score += 10;
                Utils.el('snake-score').innerText = this.score;
                this.placeApple();
            }

            // Collision self
            for (let i = index + 1; i < this.snake.cells.length; i++) {
                if (cell.x === this.snake.cells[i].x && cell.y === this.snake.cells[i].y) {
                    this.score = 0;
                    this.snake.maxCells = 4;
                    this.snake.x = 160; this.snake.y = 160;
                    Monolith.System.toast("GAME OVER");
                }
            }
        });
    },
    input(dir) {
        if (dir === 'up' && this.snake.dy === 0) { this.snake.dy = -this.grid; this.snake.dx = 0; }
        if (dir === 'down' && this.snake.dy === 0) { this.snake.dy = this.grid; this.snake.dx = 0; }
        if (dir === 'left' && this.snake.dx === 0) { this.snake.dx = -this.grid; this.snake.dy = 0; }
        if (dir === 'right' && this.snake.dx === 0) { this.snake.dx = this.grid; this.snake.dy = 0; }
    }
};
// Bind Snake Controls
['up','down','left','right'].forEach(d => {
    Utils.el(`s-${d}`).addEventListener('click', (e) => { e.preventDefault(); SnakeGame.input(d); });
});


// --- SYSTEM KERNEL ---

const Monolith = {
    System: {
        boot() {
            // Visual Noise Effect
            this.initCanvas();
            
            // UI bindings
            Utils.el('btn-tabs').onclick = () => State.toggleOverlay('tabs');
            Utils.el('btn-launcher').onclick = () => State.toggleOverlay('launcher');
            Utils.el('btn-new-tab').onclick = () => { State.addTab(); State.toggleOverlay('tabs'); };
            Utils.el('btn-back').onclick = () => this.goBack();
            
            // Omnibox
            const omni = Utils.el('omnibox-input');
            omni.addEventListener('keydown', (e) => {
                if(e.key === 'Enter') this.navigate(omni.value);
            });
            omni.addEventListener('focus', () => State.closeOverlays());

            // Init Components
            const domMan = new DOMManager();
            Terminal.init();
            SnakeGame.frameCount = 0;

            // Start Session
            State.addTab('https://bing.com'); // Default
            this.toast("omega Loaded");
        },

        navigate(val) {
            val = val.trim();
            
            // 1. Internal Commands
            if (val.startsWith('omega://')) {
                const app = val.replace('omega://', '');
                if (['terminal', 'snake'].includes(app)) {
                    State.setInternalApp(app);
                    return;
                }
            }

            // 2. Search vs URL
            let url = val;
            if (!val.includes('.') && !val.includes('://')) {
                url = `https://www.bing.com/search?q=${encodeURIComponent(val)}`;
            } else if (!val.startsWith('http')) {
                url = `https://${val}`;
            }

            // Update State
            const currentTab = State.state.tabs.find(t => t.id === State.state.activeTabId);
            if (currentTab) {
                State.updateTabMeta(currentTab.id, { url: url });
                // Force iframe reload
                const iframe = document.querySelector(`iframe.active`);
                if(iframe) iframe.src = url;
            }
        },

        openInternal(app) {
            State.setInternalApp(app);
        },

        goBack() {
            if (State.state.activeInternalApp) {
                State.setActiveTab(State.state.activeTabId);
            } else {
                // Iframe history back hack
                const iframe = document.querySelector(`iframe.active`);
                if(iframe) iframe.contentWindow.history.back();
            }
        },

        toast(msg) {
            const c = Utils.el('toast-container');
            const t = Utils.create('div', 'toast');
            t.innerText = msg;
            c.appendChild(t);
            setTimeout(() => t.remove(), 3000);
        },

        initCanvas() {
            const cvs = Utils.el('static-canvas');
            const ctx = cvs.getContext('2d');
            const resize = () => { cvs.width = window.innerWidth; cvs.height = window.innerHeight; };
            window.onresize = resize; resize();

            const draw = () => {
                const w = cvs.width, h = cvs.height;
                ctx.clearRect(0,0,w,h);
                ctx.fillStyle = "rgba(255,255,255,0.03)";
                for(let i=0; i<100; i++) {
                    ctx.fillRect(Math.random()*w, Math.random()*h, 2, 2);
                }
                requestAnimationFrame(draw);
            };
            draw();
        }
    }
};

// --- BOOT SEQUENCE ---
window.onload = () => Monolith.System.boot();

</script>
</body>
</html>
